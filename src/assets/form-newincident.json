{
	"type": "object",
	"properties": {
		"references": {
			"type": "array",
			"items": {
				"type": "object",
				"properties": {
					"reference": {
						"type": "string",
						"ui": {
							"label": "Référence"
						},
						"rules": {
							"required": true
						}
					}
				}
			},
			"ui": {
				"showLegend": true,
				"legend": "Références de l'incident",
				"noLabelSpace": true,
				"widget": "array-table",
				"widgetConfig": {
					"disableCollapse": true,
					"requiredDelConfirm": true,
					"disableReorder": true,
					"addTxt": "Ajouter",
					"delAllTxt": "Supprimer tout",
					"delConfirmText": {
						"item": "Êtes-vous sûr de vouloir supprimer cette référence ?",
						"all": "Êtes-vous sûr de vouloir supprimer toutes les références ?"
					}
				},
				"columns": 4
			}
		},

		"horodatages": {
			"type": "object",
			"properties": {
				"debutIncident": {
					"type": "string",
					"ui": {
						"widget": "date-picker",
						"label": "Début de l'incident",
						"widgetConfig": {
							"type": "datetime",
							"valueFormat": "yyyy-MM-dd HH:mm",
							"format": "dd/MM/yyyy HH:mm",
							"placeholder":"Choisir la date"
						}
					},
					"rules": {
						"required": true
					}
				},
				"fauxIncident": {
					"type": "boolean", 
					"ui": {
						"label": "Faux incident",
						"widgetConfig": {
							"type": "button"
						},
						"linkFields": [{
							"fieldPath": "finIncident",
							"rules": [
								"required"
							]
						}]
					}
				},
				"finIncident": {
					"type": "string",
					"ui": {
						"widget": "date-picker",
						"label": "Fin de l'incident",
						"widgetConfig": {
							"type": "datetime",
							"valueFormat": "yyyy-MM-dd HH:mm",
							"format": "dd/MM/yyyy HH:mm",
							"placeholder":"Choisir la date"
						},
						"disabled": "dx: {{$root.horodatages.fauxIncident}}"
					}
				}
			},
			"ui": {
				"noLabelSpace": true,
				"legend": "Horodatages",
				"widgetConfig": {
					"disableCollapse": true
				},
				"columns": 4
			}
		},

		"impactsEnseignes": {
			"type": "object",
			"properties": {
				"bddf": {
					"type": "object",
					"properties": {
						"estImpactee": {
							"type": "boolean",
							"ui": {
								"label": "Est-elle impactée ?",
								"widgetConfig": {
									"type": "button"
								},
								"linkFields": [{
									"fieldPath": "finIncident",
									"rules": [
										"required"
									]
								}]
							}
						},
						"id": {
							"type": "number",
							"value": 1,
							"ui": {
								"hidden": true
							}
						}
					},
					"ui": {
						"noLabelSpace": true,
						"legend": "BDDF",
						"widgetConfig": {
							"disableCollapse": true
						},
						"columns":4
					}
				},

				"cdn": {
					"type": "object",
					"properties": {
						"estImpactee": {
							"type": "boolean",
							"ui": {
								"label": "Est-elle impactée ?",
								"widgetConfig": {
									"type":"button"
								},
								"linkFields": [{
									"fieldPath": "finIncident",
									"rules": [
										"required"
									]
								}]
							}
						},
						"id": {
							"type": "number",
							"value": 2,
							"ui": {
								"hidden": true
							}
						}
					},
					"ui": {
						"noLabelSpace": true,
						"legend": "CDN",
						"widgetConfig": {
							"disableCollapse": true
						},
						"columns":4
					}
				},

				"bpf": {
					"type": "object",
					"properties": {
						"estImpactee": {
							"type": "boolean",
							"ui": {
								"label": "Est-elle impactée ?",
								"widgetConfig": {
									"type":"button"
								},
								"linkFields": [{
									"fieldPath": "finIncident",
									"rules": [
										"required"
									]
								}]
							}
						},
						"id": {
							"type": "number",
							"value": 3,
							"ui": {
								"hidden": true
							}
						}
					},
					"ui": {
						"noLabelSpace": true,
						"legend": "BPF",
						"widgetConfig": {
							"disableCollapse": true
						},
						"columns":4
					}
				}


			},
			"ui": {
				"noLabelSpace": true,
				"legend": "Impacts sur les enseignes",
				"columns": 4,
				"widgetConfig": {
					"disableCollapse": true
				}
			}
		},

		"infosIncident": {
			"type": "object",
			"properties": {
				"priorite": {
					"type": "number",
					"ui": {
						"widget": "select",
						"label": "Priorité",
						"widgetConfig": {
							"itemLabelField": "priorite",
							"itemValueField": "id",
							"enumSourceRemote": {
								"remoteUrl": "http://localhost:5000/api/incidents/priorite"
							},
							"placeholder":"Choisir la priorité"
						},
						"columns": 6
					},
					"rules": {
						"required": true
					}
				},
				"statut": {
					"type": "number",
					"ui": {
						"widget": "select",
						"label": "Statut",
						"widgetConfig": {
							"itemLabelField": "nom",
							"itemValueField": "id",
							"enumSourceRemote": {
								"remoteUrl": "http://localhost:5000/api/incidents/status"
							},
							"placeholder":"Choisir le statut"
						},
						"columns": 6
					},
					"rules": {
						"required": true
					}
				},
				"description": {
					"type": "string",
					"ui": {
						"widget": "textarea",
						"widgetConfig": {
							"rows": 4
						},
						"label": "Description"
					},
					"rules": {
						"required": true
					}
				},
				"impact": {
					"type": "string",
					"ui": {
						"widget": "textarea",
						"widgetConfig": {
							"rows": 4
						},
						"label": "Impacts"
					},
					"rules": {
						"required": true
					}
				},
				"contournement": {
					"type": "string",
					"ui": {
						"widget": "textarea",
						"widgetConfig": {
							"rows": 4
						},
						"label": "Contournement"
					},
					"rules": {
						"required": true
					}
				},
				"applicationImpactee": {
					"type": "string",
					"ui": {
						"widgetConfig": {
							"autocomplete": {
								"itemValueField": "keyword",
								"enumSourceRemote": {
									"remoteUrl": "http://localhost:5000/api/applications",
									"paramName": "keyword",
									"resField": "data"
								}
							},
							"trim": false
						},
						"label":"Application impactée"
					}
				}

			},
			"ui": {
				"noLabelSpace": true,
				"legend": "Informations générales de l'incident",
				"columns": 12,
				"widgetConfig": {
					"disableCollapse": true
				}
			}

		}
	}
}